<!DOCTYPE html><html lang="en" q:container="paused" q:version="0.24.0" q:render="ssr" q:base="/build/" q:locale><!--qv q:id=0 q:key=PtIy:ph_0--><!--qv q:id=1 q:key=TxCF:gH_3--><!--qv q:s q:sref=1 q:key=--><head q:head><meta charSet="utf-8" q:head><link rel="manifest" href="/manifest.json" q:head><!--qv q:id=2 q:key=0zdj:gH_0--><!--qv q:key=li_0--><title q:head>Why statecharts look appealing</title><link rel="canonical" href="https://alastair-smith2.github.io/posts/statecharts/" q:id="3" q:head><meta name="viewport" content="width=device-width, initial-scale=1.0" q:head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/themes/prism-dark.min.css" q:head><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" q:head><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" q:head><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" q:head><link rel="manifest" href="/site.webmanifest" q:head><meta name="author" content="Alastair Smith" q:head><meta name="description" content="Statecharts, beefed up state machines" q:head><meta property="og:title" content="Why statecharts look appealing" q:head><meta property="og:description" content="Statecharts, beefed up state machines" q:head><!--/qv--><!--/qv--><style q:style="yuux3y-0" hidden>/*! tailwindcss v3.2.2 | MIT License | https://tailwindcss.com
 */*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where([class~="lead"]):not(:where([class~="not-prose"] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose :where(a):not(:where([class~="not-prose"] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}.prose :where(strong):not(:where([class~="not-prose"] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(thead th strong):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(ol):not(:where([class~="not-prose"] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ol[type="A"]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha}.prose :where(ol[type="a"]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha}.prose :where(ol[type="A" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha}.prose :where(ol[type="a" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha}.prose :where(ol[type="I"]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman}.prose :where(ol[type="i"]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman}.prose :where(ol[type="I" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman}.prose :where(ol[type="i" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~="not-prose"] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~="not-prose"] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}.prose :where(ol > li):not(:where([class~="not-prose"] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul > li):not(:where([class~="not-prose"] *))::marker{color:var(--tw-prose-bullets)}.prose :where(hr):not(:where([class~="not-prose"] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~="not-prose"] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-left-width:.25rem;border-left-color:var(--tw-prose-quote-borders);quotes:"\201c""\201d""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose :where(blockquote p:first-of-type):not(:where([class~="not-prose"] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~="not-prose"] *)):after{content:close-quote}.prose :where(h1):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose :where(h1 strong):not(:where([class~="not-prose"] *)){font-weight:900;color:inherit}.prose :where(h2):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h2 strong):not(:where([class~="not-prose"] *)){font-weight:800;color:inherit}.prose :where(h3):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(h3 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit}.prose :where(h4):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose :where(h4 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit}.prose :where(img):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}.prose :where(figure > *):not(:where([class~="not-prose"] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~="not-prose"] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose :where(code):not(:where([class~="not-prose"] *)){color:var(--tw-prose-code);font-weight:600;font-size:.875em}.prose :where(code):not(:where([class~="not-prose"] *)):before{content:"`"}.prose :where(code):not(:where([class~="not-prose"] *)):after{content:"`"}.prose :where(a code):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(h1 code):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(h2 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(blockquote code):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(thead th code):not(:where([class~="not-prose"] *)){color:inherit}.prose :where(pre):not(:where([class~="not-prose"] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~="not-prose"] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~="not-prose"] *)):before{content:none}.prose :where(pre code):not(:where([class~="not-prose"] *)):after{content:none}.prose :where(table):not(:where([class~="not-prose"] *)){width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose :where(thead):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.prose :where(tbody tr):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~="not-prose"] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~="not-prose"] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~="not-prose"] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~="not-prose"] *)){vertical-align:top}.prose{--tw-prose-body: #374151;--tw-prose-headings: #111827;--tw-prose-lead: #4b5563;--tw-prose-links: #111827;--tw-prose-bold: #111827;--tw-prose-counters: #6b7280;--tw-prose-bullets: #d1d5db;--tw-prose-hr: #e5e7eb;--tw-prose-quotes: #111827;--tw-prose-quote-borders: #e5e7eb;--tw-prose-captions: #6b7280;--tw-prose-code: #111827;--tw-prose-pre-code: #e5e7eb;--tw-prose-pre-bg: #1f2937;--tw-prose-th-borders: #d1d5db;--tw-prose-td-borders: #e5e7eb;--tw-prose-invert-body: #d1d5db;--tw-prose-invert-headings: #fff;--tw-prose-invert-lead: #9ca3af;--tw-prose-invert-links: #fff;--tw-prose-invert-bold: #fff;--tw-prose-invert-counters: #9ca3af;--tw-prose-invert-bullets: #4b5563;--tw-prose-invert-hr: #374151;--tw-prose-invert-quotes: #f3f4f6;--tw-prose-invert-quote-borders: #374151;--tw-prose-invert-captions: #9ca3af;--tw-prose-invert-code: #fff;--tw-prose-invert-pre-code: #d1d5db;--tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);--tw-prose-invert-th-borders: #4b5563;--tw-prose-invert-td-borders: #374151;font-size:1rem;line-height:1.75}.prose :where(p):not(:where([class~="not-prose"] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(video):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}.prose :where(figure):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}.prose :where(li):not(:where([class~="not-prose"] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol > li):not(:where([class~="not-prose"] *)){padding-left:.375em}.prose :where(ul > li):not(:where([class~="not-prose"] *)){padding-left:.375em}.prose :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}.prose :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}.prose :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}.prose :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~="not-prose"] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(hr + *):not(:where([class~="not-prose"] *)){margin-top:0}.prose :where(h2 + *):not(:where([class~="not-prose"] *)){margin-top:0}.prose :where(h3 + *):not(:where([class~="not-prose"] *)){margin-top:0}.prose :where(h4 + *):not(:where([class~="not-prose"] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~="not-prose"] *)){padding-left:0}.prose :where(thead th:last-child):not(:where([class~="not-prose"] *)){padding-right:0}.prose :where(tbody td,tfoot td):not(:where([class~="not-prose"] *)){padding:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~="not-prose"] *)){padding-left:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~="not-prose"] *)){padding-right:0}.prose :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.prose-sm :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.1428571em}.prose-sm :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.1428571em}.prose-sm :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.1428571em}.prose-sm :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.1428571em}.prose-sm :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose-sm :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.prose-base :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.75em;margin-bottom:.75em}.prose-base :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}.prose-base :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}.prose-base :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}.prose-base :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}.prose-base :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose-base :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.prose-lg :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.8888889em;margin-bottom:.8888889em}.prose-lg :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.3333333em}.prose-lg :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.3333333em}.prose-lg :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.3333333em}.prose-lg :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.3333333em}.prose-lg :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose-lg :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.prose-xl :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.8em;margin-bottom:.8em}.prose-xl :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.2em}.prose-xl :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.2em}.prose-xl :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.2em}.prose-xl :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.2em}.prose-xl :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose-xl :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.prose-2xl :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:.8333333em;margin-bottom:.8333333em}.prose-2xl :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.3333333em}.prose-2xl :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.3333333em}.prose-2xl :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.3333333em}.prose-2xl :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.3333333em}.prose-2xl :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}.prose-2xl :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}.row-span-3{grid-row:span 3 / span 3}.row-span-1{grid-row:span 1 / span 1}.row-end-1{grid-row-end:1}.mx-auto{margin-left:auto;margin-right:auto}.mt-6{margin-top:1.5rem}.mb-6{margin-bottom:1.5rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mb-2{margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.block{display:block}.inline{display:inline}.flex{display:flex}.grid{display:grid}.min-h-screen{min-height:100vh}.max-w-3xl{max-width:48rem}.max-w-sm{max-width:24rem}.max-w-none{max-width:none}.basis-1\/4{flex-basis:25%}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-3{grid-template-rows:repeat(3,minmax(0,1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.gap-2{gap:.5rem}.gap-8{gap:2rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:.5rem}.border{border-width:1px}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity))}.bg-slate-900{--tw-bg-opacity: 1;background-color:rgb(15 23 42 / var(--tw-bg-opacity))}.bg-emerald-700{--tw-bg-opacity: 1;background-color:rgb(4 120 87 / var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.p-6{padding:1.5rem}.p-2{padding:.5rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-2xl{font-size:1.5rem;line-height:2rem}.font-bold{font-weight:700}.font-normal{font-weight:400}.tracking-tight{letter-spacing:-.025em}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.text-emerald-500{--tw-text-opacity: 1;color:rgb(16 185 129 / var(--tw-text-opacity))}.text-emerald-300{--tw-text-opacity: 1;color:rgb(110 231 183 / var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.underline-offset-1{text-underline-offset:1px}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.delay-100{transition-delay:.1s}.delay-150{transition-delay:.15s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.hover\:-translate-y-1:hover{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-110:hover{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:scale-105:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.hover\:text-emerald-300:hover{--tw-text-opacity: 1;color:rgb(110 231 183 / var(--tw-text-opacity))}.hover\:text-emerald-700:hover{--tw-text-opacity: 1;color:rgb(4 120 87 / var(--tw-text-opacity))}.prose-h1\:text-white :is(:where(h1):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.prose-h2\:text-3xl :is(:where(h2):not(:where([class~="not-prose"] *))){font-size:1.875rem;line-height:2.25rem}.prose-h2\:text-white :is(:where(h2):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.prose-h3\:text-2xl :is(:where(h3):not(:where([class~="not-prose"] *))){font-size:1.5rem;line-height:2rem}.prose-h3\:text-white :is(:where(h3):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.prose-p\:text-lg :is(:where(p):not(:where([class~="not-prose"] *))){font-size:1.125rem;line-height:1.75rem}.prose-p\:text-white :is(:where(p):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.prose-a\:text-emerald-300 :is(:where(a):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(110 231 183 / var(--tw-text-opacity))}.hover\:prose-a\:text-emerald-700 :is(:where(a):not(:where([class~="not-prose"] *))):hover{--tw-text-opacity: 1;color:rgb(4 120 87 / var(--tw-text-opacity))}.prose-li\:text-white :is(:where(li):not(:where([class~="not-prose"] *))){--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}@media (prefers-color-scheme: dark){.dark\:border-gray-700{--tw-border-opacity: 1;border-color:rgb(55 65 81 / var(--tw-border-opacity))}.dark\:bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.dark\:text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.dark\:text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.dark\:hover\:bg-gray-700:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}}@media (min-width: 640px){.sm\:mb-0{margin-bottom:0}.sm\:mb-5{margin-bottom:1.25rem}.sm\:mt-0{margin-top:0}.sm\:flex{display:flex}.sm\:basis-1\/3{flex-basis:33.333333%}.sm\:basis-1\/2{flex-basis:50%}.sm\:grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.sm\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\:flex-row{flex-direction:row}.sm\:items-center{align-items:center}.sm\:justify-center{justify-content:center}.sm\:justify-between{justify-content:space-between}}@media (min-width: 768px){.md\:basis-1\/3{flex-basis:33.333333%}}@media (min-width: 1024px){.lg\:mb-6{margin-bottom:1.5rem}}
</style></head><body lang="en"><!--qv q:id=4 q:key=AKet:gH_1--><!--qv q:id=5 q:key=uAko:--><div class="bg-slate-900 min-h-screen grid gap-2 grid-cols-1 grid-rows-3" q:key="S4_3"><!--qv q:id=6 q:key=RROC:S4_0--><header class="flex flex-col sm:flex-row sm:justify-between p-6 sm:mb-5 lg:mb-6 row-end-1" q:key="HD_2"><div class="sm:basis-1/3"><!--qv q:id=7 q:key=8gdL:HD_0--><a href="/" preventdefault:click="" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="8"><!--qv q:s q:sref=7 q:key=--><h1 class="text-3xl text-emerald-500 hover:text-emerald-300">Alastair Smith</h1><!--/qv--></a><!--/qv--></div><!--qv q:id=9 q:key=900f:HD_1--><ul class="mt-3 sm:mt-0 sm:basis-1/2 md:basis-1/3 flex flex-row sm:justify-between" q:key="il_0"><!--qv q:id=a q:key=9HbN:Home--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center false" q:key="pj_1"><!--qv q:id=b q:key=8gdL:pj_0--><a rel="noopener noreferrer" href="/" preventdefault:click="" class="hover:text-emerald-700 text-white p-2
        false 
        false" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="c"><!--qv q:s q:sref=b q:key=--><!--t=d-->Home<!----><!--/qv--></a><!--/qv--></li><!--/qv--><!--qv q:id=e q:key=9HbN:Posts--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center false" q:key="pj_1"><!--qv q:id=f q:key=8gdL:pj_0--><a rel="noopener noreferrer" href="/posts" preventdefault:click="" class="hover:text-emerald-700 text-white p-2
        false 
        false" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="g"><!--qv q:s q:sref=f q:key=--><!--t=h-->Posts<!----><!--/qv--></a><!--/qv--></li><!--/qv--><!--qv q:id=i q:key=9HbN:About--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center false" q:key="pj_1"><!--qv q:id=j q:key=8gdL:pj_0--><a rel="noopener noreferrer" href="/about" preventdefault:click="" class="hover:text-emerald-700 text-white p-2
        false 
        false" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="k"><!--qv q:s q:sref=j q:key=--><!--t=l-->About<!----><!--/qv--></a><!--/qv--></li><!--/qv--></ul><!--/qv--></header><!--/qv--><main class="row-span-3"><section class="max-w-3xl mx-auto p-6"><!--qv q:s q:sref=5 q:key=--><!--qv q:key=6qHWwsMt--><!--qv q:id=m q:key=BIIg:--><article class="prose max-w-none prose-h2:text-3xl prose-h3:text-2xl prose-h1:text-white prose-h2:text-white prose-h3:text-white prose-p:text-lg prose-p:text-white prose-a:text-emerald-300 hover:prose-a:text-emerald-700 prose-li:text-white" q:key="SR_1"><!--qv q:s q:sref=m q:key=--><h1 id="why-statecharts-look-appealing" on-document:qinit="q-4278d34c.js#s_xEi06O8vOjU"><a aria-hidden="true" tabindex="-1" href="#why-statecharts-look-appealing"><span class="icon icon-link"></span></a>Why statecharts look appealing</h1><p>I had only really delved into this after seeing <a href="https://twitter.com/mattpocockuk">Matt Pocock</a> who I think does a lot of good TypeScript content be quoted in <a href="https://2022.stateofjs.com/en-US/libraries/build-tools/">https://2022.stateofjs.com/en-US/libraries/build-tools/</a> saying</p><blockquote>
<p>If I were given something complicated to build from scratch, like a spreadsheet, WYSIWYG, or video calling app, I'd use XState. It's the only library I can rely on to build complex systems.</p>
</blockquote><p>As someone who likes to work with complicated systems while trying to make them maintainable the above piqued my interest.</p><p>Disclaimer - I’ve had very little / to no hands on experience with <a href="https://stately.ai/docs/">XState</a> which I’m going to reference in this article as a library to leverage statecharts in frontend applications besides reading through the documentation and seeing some of the office hour videos. On that point I’m aware of some of the trade offs of leveraging XState but appreciate some learnings on come through building applications at scale with a library.</p><p>From what I have seen in passing is that the TypeScript side of XState could be improved but I believe the issues I’ve seen so far are meant to be addressed in the upcoming v5 release.</p><p>That being said there are a number of advantages that instantly stand out about <a href="https://statecharts.dev/">statecharts</a> that I think are worth raising, so lets have a look.</p><h2 id="context"><a aria-hidden="true" tabindex="-1" href="#context"><span class="icon icon-link"></span></a>Context</h2><p>The <a href="https://refactoring.guru/design-patterns/state">state pattern</a> is one of the <a href="https://refactoring.guru/design-patterns">design patterns</a> I leverage most.</p><p>As a quick side note I also quite like the <a href="https://refactoring.guru/design-patterns/strategy">strategy</a>, <a href="https://refactoring.guru/design-patterns/builder">builder</a>, <a href="https://refactoring.guru/design-patterns/observer">observer</a> and <a href="https://refactoring.guru/design-patterns/decorator">decorator</a> patterns as well but it depends on the language and problem. The pattern I dread seeing most is unsurprisingly the <a href="https://refactoring.guru/design-patterns/singleton">singleton</a> pattern because used poorly presents a variety of challenges reasoning (sanely) about state and testing becomes complicated. That being said it’s not that there aren’t use cases for it, just that lots of the time I’ve encountered a singleton it added unnecessary unburdens.</p><p>So why is the state pattern one I leverage most? Mainly because I’ve found it very useful in removing application state scenarios that should not exist. Let work through a practical albeit trivial example.</p><h2 id="a-quick-primer-the-loading-error-data-scenario-and-how-the-state-pattern-helps"><a aria-hidden="true" tabindex="-1" href="#a-quick-primer-the-loading-error-data-scenario-and-how-the-state-pattern-helps"><span class="icon icon-link"></span></a>A quick primer: the loading, error, data scenario and how the state pattern helps.</h2><p>A common problem in UI is the scenario of representing to a user the different states an application goes through to show data and handle gracefully any errors. Using React as an example it’s very common to see code that looks like the following:</p><pre><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>posts<span class="token punctuation">,</span> setPosts<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loader<span class="token punctuation">,</span> setLoader<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> setError<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchPosts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://jsonplaceholder.typicode.com/posts"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setPosts</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setLoader</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setError</span><span class="token punctuation">(</span><span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> message<span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setLoader</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setLoader</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>loader<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Error: </span><span class="token punctuation">{</span>error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">There are no posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">post</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">}</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Posts<span class="token punctuation">;</span>
</code></pre><p>They point that I want to draw on here is that there are three different variables that are used in a conditional manner (e.g. have a truthy value / data present or falsy) to track the state of this UI. As such there are 2^3 different possible number of states here that a maintainer of this code has to consider and the various combinations. Furthermore some states here do not make sense to have together in this example, in the scenario that we have an error and same posts what should we show the user? What happens if someone forgets to set loading to false when data is returned by the API? It becomes cumbersome to maintain and easy to make mistakes.</p><p>The state pattern comes to the rescue here, the idea being that we are <em>in one of the three</em> states</p><p>We could refactor the above to:</p><pre><code class="language-tsx"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">State</span> <span class="token operator">=</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"Loading"</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"Error"</span><span class="token punctuation">;</span> message<span class="token operator">:</span> <span class="token string">""</span> <span class="token punctuation">}</span>
  <span class="token operator">|</span> <span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"DataRetrieved"</span><span class="token punctuation">;</span> posts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>currentPageState<span class="token punctuation">,</span> setPageState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span>State<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    state<span class="token operator">:</span> <span class="token string">"Loading"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">fetchPosts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">"https://jsonplaceholder.typicode.com/posts"</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setPageState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"DataRetrieved"</span><span class="token punctuation">,</span> posts<span class="token operator">:</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setPageState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> state<span class="token operator">:</span> <span class="token string">"Error"</span><span class="token punctuation">,</span> message<span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPageState<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">"Loading"</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Loading...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPageState<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">"Error"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Error: </span><span class="token punctuation">{</span>currentPageState<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>

  <span class="token comment">// we've said that there can't possibly be any other states so we're safe to destructure!</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> currentPageState<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">There are no posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Post</span></span> <span class="token attr-name">post</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">}</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Posts<span class="token punctuation">;</span>
</code></pre><p>However the state pattern has its own pitfalls. In a more complicated scenario <a href="https://statecharts.dev/state-machine-state-explosion.html">“state explosion”</a> can happen, where every possible combination of state can happen. An example requirement would be allow a user to refresh posts while maintaining their current list. In this scenario you’d you need to add an additional variety of states that adds complication and having to account for every possible transition.</p><h2 id="where-statecharts-come-in"><a aria-hidden="true" tabindex="-1" href="#where-statecharts-come-in"><span class="icon icon-link"></span></a>Where statecharts come in</h2><p>As according to <a href="https://statecharts.dev/what-is-a-statechart.html">https://statecharts.dev/what-is-a-statechart.html</a>, a statechart can be defined as</p><blockquote>
<p>The primary feature of statecharts is that states can be organized in a <em>hierarchy</em>: A statechart is a <a href="https://statecharts.dev/what-is-a-state-machine.html">state machine</a> where each state in the state machine may define its own <em>subordinate</em> state machines, called <em>substates</em>. Those states can again define substates.</p>
</blockquote><p>Their origins are from David Harel in a 1987 <a href="https://www.sciencedirect.com/science/article/pii/0167642387900359?ref=pdf_download&amp;fr=RR-2&amp;rr=7ad9d87c9f82889e">paper</a> called “A visual formalization for complex systems”.</p><p>Statecharts have a number of benefits including (sourced <a href="https://xstate.js.org/docs/about/concepts.html#statecharts">https://xstate.js.org/docs/about/concepts.html#statecharts</a>):</p><ol>
<li>Have parallel states</li>
<li>Have nested states (aka “child states”)</li>
<li>Transitions can be guarded</li>
<li>Delays</li>
<li>Behaviour is decoupled from the component</li>
<li>Actions on state entry</li>
</ol><p>I particularly want to talk about the merits of points 1 and 2 in this post but that’s not to say the others are less valuable.</p><h2 id="parallel-states-and-nested-states"><a aria-hidden="true" tabindex="-1" href="#parallel-states-and-nested-states"><span class="icon icon-link"></span></a>Parallel states and nested states</h2><p>The docs for both of these from xstate give great examples. Starting with <a href="https://stately.ai/docs/states/parallel-states">parallel</a> a classic example is that for a video player we can have both video and audio in different states. In the docs examples we have two different substates for each but we want for our state machine to be able to handle these separately. The parallel state approach here in a statechart is a significant improvement upon the state pattern because we are able to divide our state into separate regions and reduce the number of atomic states we have. With the <a href="https://stately.ai/docs/states/parent-states">child</a> state again we see a more complicated example where there can be substates within a parent state. This is a very common pattern, e.g. a modal that overlays a screen with text editor. Again statecharts give a simplified approach to declaring all the possible states in this hierarchy.</p><h2 id="conclusion"><a aria-hidden="true" tabindex="-1" href="#conclusion"><span class="icon icon-link"></span></a>Conclusion</h2><p>Statecharts as a way of organising application state / orchestrating the flow to which a user can encounter in my mind bring a lot of benefits.</p><ol>
<li>It enforces the upfront thinking of variety of possible states, meaning error states / edge cases are less likely to be forgotten.</li>
<li>Being able to visually organise and share statecharts is a great asset. In theory being able to share statecharts (<a href="https://stately.ai/">Stately.ai</a>, the company behind XState have smartly invested heavily into their visual editor) can bridge a lot of gaps across disciplines to have a unified understanding of the desired behaviour.</li>
<li>Having parallel states / nested states is a great enhancement to bog standard state machines that reduces complexity.</li>
<li>Having the logic of statecharts decoupled from your UI framework is also a nice benefit.</li>
<li>Other features that I haven’t delved into such as guarded transitions and actions on entry are also very beneficial.</li>
</ol><p>In my mind statecharts seem like a great tool to reducing complexity and I can understand the claim that is originally quoted at the top of this article a lot more than when I started. What does surprise me is the lack of maturity in terms of tooling / libraries outside of XState from what I've seen.</p><!--/qv--></article><!--/qv--><!--/qv--><!--/qv--></section></main><!--qv q:id=n q:key=pvSf:S4_2--><footer class="p-6 flex flex-col sm:flex-row sm:justify-between row-span-1" q:key="0C_1"><p class="sm:basis-1/3 sm:flex sm:items-center text-emerald-500 mb-6 sm:mb-0">©2022 <!--t=o-->- 2023<!----></p><!--qv q:id=p q:key=900f:0C_0--><ul class="mt-3 sm:mt-0 sm:basis-1/2 md:basis-1/3 flex flex-row sm:justify-between" q:key="il_0"><!--qv q:id=q q:key=9HbN:Twitter--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center transition ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300" q:key="pj_1"><!--qv q:id=r q:key=8gdL:pj_0--><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/alastair_smith2" class="hover:text-emerald-700 text-white p-2
        false 
        rounded-full bg-emerald-700 hover:bg-white" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="s"><!--qv q:s q:sref=r q:key=--><!--t=t-->Twitter<!----><!--/qv--></a><!--/qv--></li><!--/qv--><!--qv q:id=u q:key=9HbN:Github--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center transition ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300" q:key="pj_1"><!--qv q:id=v q:key=8gdL:pj_0--><a target="_blank" rel="noopener noreferrer" href="https://github.com/Alastair-smith2" class="hover:text-emerald-700 text-white p-2
        false 
        rounded-full bg-emerald-700 hover:bg-white" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="w"><!--qv q:s q:sref=v q:key=--><!--t=x-->Github<!----><!--/qv--></a><!--/qv--></li><!--/qv--><!--qv q:id=y q:key=9HbN:LinkedIn--><li class="sm:flex sm:justify-center basis-1/4 sm:basis-1/3 items-center transition ease-in-out delay-100 hover:-translate-y-1 hover:scale-110 duration-300" q:key="pj_1"><!--qv q:id=z q:key=8gdL:pj_0--><a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/alastair-smith-8b1819134" class="hover:text-emerald-700 text-white p-2
        false 
        rounded-full bg-emerald-700 hover:bg-white" on:click="q-b4a9b9f0.js#s_kzjavhDI3L0[0 1 2]" on:mouseover="q-b4a9b9f0.js#s_yiXwCC0m3jY" on:focus="q-b4a9b9f0.js#s_PrXIxv2vNXY" on:qvisible="q-b4a9b9f0.js#s_EpaZ5qQ4Lg4" q:key="AD_1" q:id="10"><!--qv q:s q:sref=z q:key=--><!--t=11-->LinkedIn<!----><!--/qv--></a><!--/qv--></li><!--/qv--></ul><!--/qv--></footer><!--/qv--></div><!--/qv--><!--/qv--><!--qv q:key=gH_2--><script>((s,a,i,r)=>{i=(e,t)=>{t=document.querySelector("[q\\:base]"),t&&a.active&&a.active.postMessage({type:"qprefetch",base:t.getAttribute("q:base"),...e})},document.addEventListener("qprefetch",e=>{const t=e.detail;a?i(t):t.bundles&&s.push(...t.bundles)}),navigator.serviceWorker.register("/service-worker.js").then(e=>{r=()=>{a=e,i({bundles:s})},e.installing?e.installing.addEventListener("statechange",t=>{t.target.state=="activated"&&r()}):e.active&&r()}).catch(e=>console.error(e))})([])</script><!--/qv--></body><!--/qv--><!--/qv--><!--/qv--><script type="qwik/json">{"refs":{"8":"k m 2g","10":"2o 2w 2g","c":"k 2j 2g","g":"2k 2l 2g","k":"2m 2n 2g","s":"2o 2s 2g","w":"2o 2u 2g"},"ctx":{"0":{"c":"show-draft-posts=2d"},"1":{"w":"2f","c":"qc-c=1q! qc-ic=2 qc-h=0! qc-l=1! qc-n=2g qc-s=2c! qc-a=4"},"2":{"h":"2x","s":"0! 1!"},"3":{"h":" 2o"},"4":{"h":"1r","s":"2"},"7":{"h":"2y 5!","s":"2g 1!"},"9":{"h":" 6!"},"a":{"h":"38 7!","s":"1!"},"b":{"h":"2y 8!","s":"2g 1!"},"e":{"h":"38 9!","s":"1!"},"f":{"h":"2y a!","s":"2g 1!"},"i":{"h":"38 b!","s":"1!"},"j":{"h":"2y c!","s":"2g 1!"},"":{"h":" 2o"},"p":{"h":" d!"},"q":{"h":"38 e!","s":"1!"},"r":{"h":"2y h!","s":"2g 1!"},"u":{"h":"38 f!","s":"1!"},"v":{"h":"2y i!","s":"2g 1!"},"y":{"h":"38 g!","s":"1!"},"z":{"h":"2y j!","s":"2g 1!"}},"objs":[{"title":"n","meta":"22","links":"23","styles":"24","frontmatter":"25"},{"url":"27","href":"28","pathname":"1b","query":"29","params":"2a","isNavigating":"2b"},"\u001243","\u00121b","\u001243",{"href":"k"},{"items":"36"},{"$$style":"37","item":"31"},{"$$target":"39","rel":"2h","class":"2i","$$href":"3a"},{"$$style":"3c","item":"33"},{"$$target":"3d","rel":"2h","class":"2i","$$href":"3e"},{"$$style":"3g","item":"35"},{"$$target":"3h","rel":"2h","class":"2i","$$href":"3i"},{"style":"3k","items":"3r"},{"$$style":"3s","item":"3m"},{"$$style":"3u","item":"3o"},{"$$style":"3w","item":"3q"},{"$$target":"3x","rel":"2h","class":"2q","$$href":"3y"},{"$$target":"3z","rel":"2h","class":"2q","$$href":"40"},{"$$target":"41","rel":"2h","class":"2q","$$href":"42"},"/",true,{"href":"k","preventdefault:click":"l"},"Why statecharts look appealing","why-statecharts-look-appealing",1,{"text":"n","id":"o","level":"p"},"Context","context",2,{"text":"r","id":"s","level":"t"},"A quick primer: the loading, error, data scenario and how the state pattern helps.","a-quick-primer-the-loading-error-data-scenario-and-how-the-state-pattern-helps",{"text":"v","id":"w","level":"t"},"Where statecharts come in","where-statecharts-come-in",{"text":"y","id":"z","level":"t"},"Parallel states and nested states","parallel-states-and-nested-states",{"text":"11","id":"12","level":"t"},"Conclusion","conclusion",{"text":"14","id":"15","level":"t"},["q","u","x","10","13","16"],"Recent blogs posts","March 2023","Draft: Statecharts: The \"beefed up\" state machines","/posts/statecharts/",{"text":"1a","href":"1b"},"Draft: On being a tech lead: Some reflections from a conversation","/posts/musings-on-being-a-tech-lead/",{"text":"1d","href":"1e"},"Draft: Learnings from cryptopals: Getting stuck into some cryptography","/posts/learnings-from-cryptopals/",{"text":"1g","href":"1h"},"New blog: Why and what it's built with.","/posts/new-blog/",{"text":"1j","href":"1k"},["1c","1f","1i","1l"],{"text":"19","items":"1m"},["1n"],{"text":"18","items":"1o"},{"headings":"17","menu":"1p"},"\u0002q-4278d34c.js#s_AKetNByE5TM","author","Alastair Smith",{"name":"1s","content":"1t"},"description","Statecharts, beefed up state machines",{"name":"1v","content":"1w"},"og:title",{"property":"1y","content":"n"},"og:description",{"property":"20","content":"1w"},["1u","1x","1z","21"],[],[],{},"\u00111! @0","\u0005https://alastair-smith2.github.io/posts/statecharts/","https://alastair-smith2.github.io/posts/statecharts/","\u0015",{},false,{},{"showDraftPosts":"2b"},"\u0002q-89e8c5af.js#s_02wMImzEAbk[4 1q! 2 0! 43 2c! 3 1!]","\u00032 e 2e #1","\u0002q-89e8c5af.js#s_fX0bDjeJa0E[4 3 1!]","noopener noreferrer","hover:text-emerald-700 text-white p-2\n        false \n        false ",{"target":"43","rel":"2h","class":"2i","href":"k","preventdefault:click":"l"},"/posts",{"target":"43","rel":"2h","class":"2i","href":"2k","preventdefault:click":"l"},"/about",{"target":"43","rel":"2h","class":"2i","href":"2m","preventdefault:click":"l"},null,"_blank","hover:text-emerald-700 text-white p-2\n        false \n        rounded-full bg-emerald-700 hover:bg-white ","https://twitter.com/alastair_smith2",{"target":"2p","rel":"2h","class":"2q","href":"2r","preventdefault:click":"2b"},"https://github.com/Alastair-smith2",{"target":"2p","rel":"2h","class":"2q","href":"2t","preventdefault:click":"2b"},"https://www.linkedin.com/in/alastair-smith-8b1819134",{"target":"2p","rel":"2h","class":"2q","href":"2v","preventdefault:click":"2b"},"\u0002q-1097190a.js#s_0zdjSlyYHGs","\u0002q-b4a9b9f0.js#s_8gdLBszqbaM","\u00117! @1","Home",{"href":"k","text":"30"},"Posts",{"href":"2k","text":"32"},"About",{"href":"2m","text":"34"},["31","33","35"],"\u00116! @2","\u0002q-82d60cf3.js#s_9HbNuki98sM","\u00117! @3","\u00117! @4","\u00119! @1","\u00116! @2","\u00119! @3","\u00119! @4","\u0011b! @1","\u00116! @2","\u0011b! @3","\u0011b! @4","\u0011e! @1","button","Twitter",{"href":"2r","text":"3l"},"Github",{"href":"2t","text":"3n"},"LinkedIn",{"href":"2v","text":"3p"},["3m","3o","3q"],"\u0011d! @2","\u0011f! @1","\u0011d! @2","\u0011g! @1","\u0011d! @2","\u0011e! @3","\u0011e! @4","\u0011f! @3","\u0011f! @4","\u0011g! @3","\u0011g! @4","\u0001"],"subs":[["0 #2 title","0 #2 meta","0 #2 links","0 #2 styles"],["1 #3 26 #2 href","0 #7 href","0 #a pathname","0 #b href","0 #e pathname","0 #f href","0 #i pathname","0 #j href","0 #q pathname","0 #u pathname","0 #y pathname"],["0 #4"],["0 2f"],["0 2f"],["_2"],["_2"],["_2","0 #a item","0 #b item","4 #a 2z #d"],["_2","0 #b class"],["_2","0 #e item","0 #f item","4 #e 3b #h"],["_2","0 #f class"],["_2","0 #i item","0 #j item","4 #i 3f #l"],["_2","0 #j class"],["_2"],["_2","0 #q item","0 #r item","4 #q 3j #t"],["_2","0 #u item","0 #v item","4 #u 3t #x"],["_2","0 #y item","0 #z item","4 #y 3v #11"],["_2","0 #r class"],["_2","0 #v class"],["_2","0 #z class"]]}</script><script q:func="qwik/json">document.currentScript.qFuncs=[(p0)=>(p0.url.href),
(p0)=>(p0.item.text),
(p0)=>(p0.style??"link"),
(p0)=>(p0.item.href?.includes("https")?"_blank":undefined),
(p0)=>(p0.item.href)]</script><script type="module">document.dispatchEvent(new CustomEvent("qprefetch",{detail:{"bundles":["q-89e8c5af.js","q-b6c15c7c.js","q-fe032541.js","q-b4a9b9f0.js","q-4278d34c.js","q-1097190a.js","q-82d60cf3.js"]}}))</script><script id="qwikloader">((e,t)=>{const n="__q_context__",o=window,i=new Set,s=t=>e.querySelectorAll(t),r=(e,t,n=t.type)=>{s("[on"+e+"\\:"+n+"]").forEach((o=>f(o,e,t,n)))},a=(e,t)=>e.getAttribute(t),l=t=>{if(void 0===t._qwikjson_){let n=(t===e.documentElement?e.body:t).lastElementChild;for(;n;){if("SCRIPT"===n.tagName&&"qwik/json"===a(n,"type")){t._qwikjson_=JSON.parse(n.textContent.replace(/\\x3C(\/?script)/g,"<$1"));break}n=n.previousElementSibling}}},c=(e,t)=>new CustomEvent(e,{detail:t}),f=async(t,o,i,s=i.type)=>{const r="on"+o+":"+s;t.hasAttribute("preventdefault:"+s)&&i.preventDefault();const c=t._qc_,f=null==c?void 0:c.li.filter((e=>e[0]===r));if(f&&f.length>0){for(const e of f)await e[1].getFn([t,i],(()=>t.isConnected))(i,t);return}const d=a(t,r);if(d){const o=t.closest("[q\\:container]"),s=new URL(a(o,"q:base"),e.baseURI);for(const r of d.split("\n")){const a=new URL(r,s),c=a.hash.replace(/^#?([^?[|]*).*$/,"$1")||"default",f=performance.now(),d=import(a.href.split("#")[0]);l(o);const p=b(await d,c),w=e[n];if(t.isConnected)try{e[n]=[t,i,a],u("qsymbol",{symbol:c,element:t,reqTime:f}),await p(i,t)}finally{e[n]=w}}}},u=(t,n)=>{e.dispatchEvent(c(t,n))},b=(e,t)=>{if(t in e)return e[t];for(const n of Object.values(e))if("object"==typeof n&&n&&t in n)return n[t]},d=e=>e.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())),p=async e=>{let t=d(e.type),n=e.target;for(r("-document",e,t);n&&n.getAttribute;)await f(n,"",e,t),n=e.bubbles&&!0!==e.cancelBubble?n.parentElement:null},w=e=>{r("-window",e,d(e.type))},q=()=>{var n;const r=e.readyState;if(!t&&("interactive"==r||"complete"==r)&&(t=1,u("qinit"),(null!=(n=o.requestIdleCallback)?n:o.setTimeout).bind(o)((()=>u("qidle"))),i.has("qvisible"))){const e=s("[on\\:qvisible]"),t=new IntersectionObserver((e=>{for(const n of e)n.isIntersecting&&(t.unobserve(n.target),f(n.target,"",c("qvisible",n)))}));e.forEach((e=>t.observe(e)))}},v=(e,t,n,o=!1)=>e.addEventListener(t,n,{capture:o}),y=t=>{for(const n of t)i.has(n)||(v(e,n,p,!0),v(o,n,w),i.add(n))};if(!e.qR){const t=o.qwikevents;Array.isArray(t)&&y(t),o.qwikevents={push:(...e)=>y(e)},v(e,"readystatechange",q),q()}})(document);</script><script>window.qwikevents.push("click", "mouseover", "focus", "qvisible", "qinit")</script></html>